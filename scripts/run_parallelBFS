#!/bin/bash

###
## Find and remove all remaining semi-metric edges
###

if test "$#" -ne 4; then
	echo "Usage: run_parallelBFS <input_edges> <output_edges> <LRUMap_size> <#threads>"
	exit
fi
/home/b.vka/workspace/hadoop-1.2.1/hadoop-1.2.1/bin/hadoop jar /home/b.vka/workspace/okapi/target/okapi-0.3.5-SNAPSHOT-jar-with-dependencies.jar org.apache.giraph.GiraphRunner ml.grafos.okapi.semimetric.ParallelMetricBFS\$PropagateUnlabeledEdges -mc  ml.grafos.okapi.semimetric.ParallelMetricBFS\$MasterCompute -eif ml.grafos.okapi.semimetric.io.LongDoubleIntEdgeValueInputFormat -eip $1 -eof org.apache.giraph.io.formats.SrcIdDstIdEdgeValueTextOutputFormat -op $2 -w 1 -ca giraph.outEdgesClass=org.apache.giraph.edge.HashMapEdges -ca giraph.SplitMasterWorker=false -ca giraph.numComputeThreads=$4 -ca giraph.numInputThreads=$4 -ca giraph.numOutputThreads=$4 -ca giraph.useSuperstepCounters=false -ca mapred.child.java.opts=-Xmx14g -ca giraph.nettyCompressionAlgorithm=SNAPPY -ca lru.map.size=$3
